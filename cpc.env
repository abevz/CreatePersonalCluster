# =============================================================================
# CPC (Cluster Provision & Configure) Environment Configuration
# =============================================================================
# This file contains all environment variables needed for the my-kthw project
# Customize the values according to your setup
# 
# This project is based on Tofu workspaces (debian, ubuntu, rocky)
# Some variables may need different values per workspace - see workspace-specific sections

# =============================================================================
# GENERAL PROJECT CONFIGURATION
# =============================================================================
# Project repository path (automatically detected by CPC setup)
# REPO_PATH is set automatically by 'cpc setup-cpc' command
# It points to the directory containing the cpc script

# Timezone for VMs and templates
TIMEZONE="Europe/Warsaw"

# =============================================================================
# PROXMOX CONNECTION SETTINGS
# =============================================================================
# Proxmox server details (sensitive data loaded from secrets.sops.yaml)
# PROXMOX_HOST - loaded from secrets
# PROXMOX_USERNAME - loaded from secrets  
# PROXMOX_PASSWORD - loaded from secrets
PROXMOX_NODE="homelab"     # Proxmox node name for VM creation

# Proxmox storage configuration
PROXMOX_STORAGE_BASE_PATH="/DataPool"  # Base path for Proxmox storage
PROXMOX_ISO_PATH="${PROXMOX_STORAGE_BASE_PATH}/MyStorage/template/iso/"
PROXMOX_DISK_DATASTORE="MyStorage"
PROXMOX_BACKUPS_DATASTORE="MyStorage"

# Template image download behavior
FORCE_IMAGE_DOWNLOAD="false"  # Set to "true" to force download even if image exists

# Network configuration
TEMPLATE_VM_BRIDGE="vmbr0"
TEMPLATE_VLAN_TAG=""  # Leave empty for no VLAN tag, or set to VLAN ID

# DNS settings
TWO_DNS_SERVERS="10.10.10.187 8.8.8.8"  # Two DNS servers separated by space
TEMPLATE_VM_SEARCH_DOMAIN="bevz.net"

# Network gateway
TEMPLATE_VM_GATEWAY="10.10.10.1"

# =============================================================================
# MINIO/S3 BACKEND CONFIGURATION
# =============================================================================
# MinIO credentials for Terraform S3 backend (loaded from secrets.sops.yaml)
# AWS_ACCESS_KEY_ID - loaded from secrets
# AWS_SECRET_ACCESS_KEY - loaded from secrets
# AWS_DEFAULT_REGION - set to us-east-1

# =============================================================================
# SSH CONFIGURATION
# =============================================================================
# SSH keys are loaded from secrets.sops.yaml

# =============================================================================
# VM USER CONFIGURATION
# =============================================================================
# Default user credentials for VMs (loaded from secrets.sops.yaml)
# VM_USERNAME - loaded from secrets
# VM_PASSWORD - loaded from secrets

# =============================================================================
# WORKSPACE CONFIGURATION (MODULAR)
# =============================================================================
# All workspace-specific configuration is now stored in separate files:
# ./envs/<workspace>.env
#
# Available workspaces:
# - ubuntu  - Ubuntu 24.04 with Kubernetes 1.31
# - debian  - Debian 12 with Kubernetes 1.30
# - rocky   - Rocky Linux 9 with Kubernetes 1.29
# - suse    - OpenSUSE Leap 15.6 with Kubernetes 1.30
# - k8s129  - Ubuntu 24.04 with Kubernetes 1.29 (example)
#
# To add a new workspace:
#   ./cpc clone-workspace <existing-workspace> <new-workspace>
#
# For example:
#   ./cpc clone-workspace ubuntu myproject
#   vim envs/myproject.env
#   ./cpc ctx myproject
#
# Each workspace file contains:
# - Template VM configuration
# - Kubernetes versions
# - Component versions
# - Template ID mappings

# =============================================================================
# TEMPLATE VM SPECIFICATIONS (DEFAULTS)
# =============================================================================
# These are default values that can be overridden in workspace files
TEMPLATE_VM_CPU_TYPE="x86-64-v3"  # or "host" for GPU passthrough
TEMPLATE_VM_IP="10.10.10.199/24"  # Temporary IP for template creation

# =============================================================================
# OPTIONAL FEATURES
# =============================================================================
# NVIDIA GPU support (set to version or "none" to disable)
NVIDIA_DRIVER_VERSION="none"  # e.g., "550.54.15" or "none"

# Extra template tags (space-separated)
EXTRA_TEMPLATE_TAGS="kubernetes"

# Template image download behavior
FORCE_IMAGE_DOWNLOAD="false"  # Set to "true" to always download images, "false" for smart caching

# =============================================================================
# ANSIBLE CONFIGURATION
# =============================================================================
# SSH user for Ansible (if different from VM_USERNAME)
ANSIBLE_REMOTE_USER="${VM_USERNAME}"

# Path to kubeconfig file
KUBECONFIG="${HOME}/.kube/config"

# =============================================================================
# TERRAFORM/TOFU CONFIGURATION
# =============================================================================
# Network configuration for Terraform
NETWORK_BRIDGE="vmbr0"
STORAGE="local-lvm"
DNS_SERVERS="10.10.10.187"  # Primary DNS for Terraform (will be converted to list)

# Note: Workspace-specific Terraform settings like PM_TEMPLATE_ID, VM_CPU_CORES, etc.
# are now defined in each workspace's env file (./envs/<workspace>.env)
